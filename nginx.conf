# Cache paths cho từng loại file
proxy_cache_path /var/cache/nginx/video_cache levels=1:2 keys_zone=video_cache:10m max_size=10g;
proxy_cache_path /var/cache/nginx/doc_cache levels=1:2 keys_zone=doc_cache:5m max_size=2g;
proxy_cache_path /var/cache/nginx/file_cache levels=1:2 keys_zone=file_cache:5m max_size=5g;

server {
    # Cache cho video files
    location /api/proxy/files/video {
        proxy_cache video_cache;
        proxy_cache_valid 200 7d;
        proxy_cache_use_stale error timeout http_500 http_502 http_503 http_504;
    }

    # Cache cho documents (PDF, DOC, etc)
    location /api/proxy/files/docs {
        proxy_cache doc_cache;
        proxy_cache_valid 200 3d;
        add_header Content-Disposition "inline";
    }

    # Cache cho các file khác
    location /api/proxy/files/other {
        proxy_cache file_cache;
        proxy_cache_valid 200 1d;
        add_header Content-Disposition "attachment";
    }
} 